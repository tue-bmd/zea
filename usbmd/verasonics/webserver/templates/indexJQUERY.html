<html>
  <head>
    <title>Streaming</title>
  </head>
  <style> 
    input[type=button], input[type=submit], input[type=reset] {
      background-color: #005374;
      border: none;
      color: white;
      padding: 16px 32px;
      text-decoration: none;
      margin: 4px 2px;
      cursor: pointer;
    }
    </style>

  

<body style="background-color:rgb(102, 102, 102);">

  <div style="width: 500px; float: left;">
    <h1>Streaming</h1>
    <img src="{{ url_for('vid') }}"> 
  </div>
      

  <div style="width: 400px; float: left;"> 

    <h3>Beamforming mode</h3>
      <button onclick="setDAS()">DAS</button> 
      <button onclick="setABLE()">ABLE</button>  
      <button onclick="setNeuralMAP()">neuralMAP</button>  

    <h3>Firing Angles</h3>
      <button onclick="set1PW()">1 PW</button> 
      <button onclick="set11PWs()">11 PWs</button>  

    <h3>Scaling mode</h3>
        <button onclick="setScaleNormal()">Normalized</button> 
        <button onclick="setScaleSmoothNormal()">Smooth Normalized</button>  
        <button onclick="setScaleFixed()">Fixed</button>
      
    <h3>Transmit voltage (V)</h3>
      <div class="container" id="control_panel_1">
        <form action="/" method ="post" enctype="multipart/form-data" id="form">
          <div class="row">
            <div class="col">
              <input id="slide" type="range" min="2" max="40" step="0.5" value="10" name="slide">
              <div id="sliderAmount"></div>
            </div> 
          </div>
        </form>
      </div>

  <h3>Display settings</h3>
    <input type="checkbox"  class='toggle' data-toggle="toggle_fps" onclick="change_status('.fps')">
    <div>Toggle FPS</div>
    <input type="checkbox"  class='toggle' data-toggle="toggle_upscaling" onclick="change_status('.upscaling')">
    <div>Toggle AI Upscaling</div>
  </div>      
</body>

  
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>

  <script>
      function setDAS() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"beamformer" : "DAS"},
              })
      }
      
      function setABLE(name) {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"beamformer" : "ABLE"},
              })
      }
      
      function setNeuralMAP() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"beamformer" : "NeuralMAP"},
              })
      }
      
      
      function setScaleNormal() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"norm_mode" : "normal"},
              })
      }
      
      function setScaleSmoothNormal() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"norm_mode" : "smoothnormal"},
              })
      }
      
      function setScaleFixed() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"norm_mode" : "fixed"},
              })
      }
      
      
       function change_status(status_class) {
           $.ajax({
               url: "{{ url_for('create_file') }}",
               type: "POST",
               data: {fps: true},
                 success: function(response) {
                 $(status_class).html(response);
                         },
               error: function(xhr) {
               }
           });
       }
       
      var slide = document.getElementById('slide'),
        sliderDiv = document.getElementById("sliderAmount");

    slide.onchange = function() {
        sliderDiv.innerHTML = this.value;
        $.post({
                url: "{{ url_for('create_file') }}",
                data: $('form').serialize(),
            });
    }
    
          
      
      function set1PW() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"na" : "1"},
              })
      }
      
      function set11PWs() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"na" : "11"},
              })
      }
    
        

  
  </script>
  
</html>
