<html>
  <head>
    <title>Streaming</title>
  </head>
  <style> 
    input[type=button], input[type=submit], input[type=reset] {
      background-color: #005374;
      border: none;
      color: white;
      padding: 16px 32px;
      text-decoration: none;
      margin: 4px 2px;
      cursor: pointer;
    }

    .toggle{
      position: relative;
      display: inline-block;
    }
    .toggle input{opacity: 0; position: absolute; left: 0; top: 0}
    .toggle i{
      position: relative;
      background: #fff;
      color: #000;
      height: 34px; 
      width: 200px;
      display: flex;
      font-style: normal;
      justify-content: center;
      align-items: center;
      border: 1px solid #ccc;
      border-radius: 4px;
      transition: 350ms;
    }
    .toggle input:checked ~ i{
      background: blue;
      border: 1px solid blue;
      color: #fff;
    }
    .toggle i:before{
      content: attr(data-swchoff-text);
    }
    .toggle input:checked ~ i:before{
      content: attr(data-swchon-text);
    }
    </style>

  

<body style="background-color:rgb(102, 102, 102);">

  <div style="width: 600px; float: left;">
    <h1>Streaming</h1>
    <img src="{{ url_for('vid') }}"> 
  </div>
      

  <div style="width: 400px; float: left;"> 

    <h3>Image Settings</h3>
    <fieldset id="group1"></fieldset> 
      <input type="radio" value="option1" name="group1" checked="checked" onclick="setDAS()"> DAS </input><br>
      <input type="radio" value="option2" name="group1" onclick="setABLE()"> ABLE </input><br>
      <input type="radio" value="option3" name="group1" onclick= "setNeuralMAP()"> neuralMAP</input><br>
      <input type="radio" value="option4" name="group1" onclick= "setRawData()"> Raw data (center)</input><br>
  </fieldset>  

    <h3>Firing Angles</h3>
      <fieldset id="group3"></fieldset> 
         <input type="radio" value="option1" name="group3" checked="checked" onclick="set1PW()"> 1 PW </input><br>
         <input type="radio" value="option2" name="group3" onclick="set5PWs()"> 5 PWs </input><br>
         <input type="radio" value="option2" name="group3" onclick="set11PWs()"> 11 PWs </input><br>
      </fieldset> 

    <h3>Scaling mode</h3>
    <fieldset id="group2"></fieldset> 
      <input type="radio" value="option1" name="group2" checked="checked" onclick="setScaleNormal()"> Normalized </input><br>
      <input type="radio" value="option2" name="group2" onclick="setScaleSmoothNormal()"> Smooth Normalized </input><br>
      <input type="radio" value="option3" name="group2" onclick= "setScaleFixed()"> Fixed </input><br>
  </fieldset> 
      
    <h3>Transmit voltage (V)</h3>
      <div class="container" id="control_panel_1">
        <form action="/" method ="post" enctype="multipart/form-data" id="form">
          <div class="row">
            <div class="col">
              <input id="slide" type="range" min="2" max="40" step="0.5" value="10" name="slide">
              <div id="sliderAmount"></div>
            </div> 
          </div>
        </form>
      </div>

    <h3>Speed-of-sound (V)</h3>
      <div class="container" id="control_panel_2">
        <form action="/" method ="post" enctype="multipart/form-data" id="form">
          <div class="row">
            <div class="col">
              <input id="slide_sos" type="range" min="1400" max="1700" step="1" value="1540" name="slide_sos">
              <div id="sliderAmount"></div>
            </div> 
          </div>
        </form>
      </div>


  <h3>Display settings</h3>
  <label class="toggle">
    <input type="checkbox" name="screen" value="Profile" actionname="Profile" onclick="change_status_autotuning()">
    <i data-swchoff-text="Autotuning" data-swchon-text="Autotuning"></i>
  </label>  


  <label class="toggle">
    <input type="checkbox" name="screen" value="Profile" actionname="Profile" onclick="change_status_upscaling()">
    <i data-swchoff-text="AI Upscaling" data-swchon-text="AI Upscaling"></i>
  </label>  
  
  <label class="toggle">
    <input type="checkbox" name="screen" value="Profile" actionname="Profile" onclick="change_status_fps()">
    <i data-swchoff-text="FPS" data-swchon-text="FPS"></i>
  </label>


</body>

  
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>

  <script>
      function setDAS() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"beamformer" : "DAS"},
              })
      }
      
      function setABLE(name) {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"beamformer" : "ABLE"},
              })
      }
      
      function setNeuralMAP() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"beamformer" : "NeuralMAP"},
              })
      }

      function setRawData() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"beamformer" : "RAW"},
              })
      }
      
      
      function setScaleNormal() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"norm_mode" : "normal"},
              })
      }
      
      function setScaleSmoothNormal() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"norm_mode" : "smoothnormal"},
              })
      }
      
      function setScaleFixed() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"norm_mode" : "fixed"},
              })
      }
      
      
      function change_status_autotuning() {
          $.ajax({
                url: "{{ url_for('create_file') }}",
                type: "POST",
                data: {"intensityAuto": "True"}
              })
      }

      function change_status_upscaling() {
          $.ajax({
                url: "{{ url_for('create_file') }}",
                type: "POST",
                data: {"upscaling": "True"}
              })
      }

      function change_status_fps() {
          $.ajax({
                url: "{{ url_for('create_file') }}",
                type: "POST",
                data: {"fps": "True"}
              })
      }
       
      var slide = document.getElementById('slide'),
      sliderDiv = document.getElementById("sliderAmount");

      slide.onchange = function() {
          sliderDiv.innerHTML = this.value;
          $.post({
                  url: "{{ url_for('create_file') }}",
                  data: $('form').serialize(),
              });
      }
    
          
      
      function set1PW() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"na" : "1"},
              })
      }
      
      function set11PWs() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"na" : "11"},
              })
      }

      function set5PWs() {
          $.ajax({
                  type: "POST",
                  url: "{{ url_for('create_file') }}",
                  data: {"na" : "5"},
              })
      }
    
        

  
  </script>
  
</html>
